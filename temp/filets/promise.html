<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>promise test</title>
    <script type="text/javascript" charset="utf-8">
/*
新浏览器支持Promise对象，可以直接用new构造
构造函数参数是一个函数 f(resolve, reject)

它们各自的原型为 resolve(p), reject(p)
由系统部署

通用格式为:
*/
// var promise = new Promise((resolve, reject) => {
//   // 执行一些异步操作
//   some_async(..., ()=>{ // 这里进入异步操作的回调
//   
//      // 在这里选择性调用 resolve 或者 reject
//     if (...){ 
//       resolve(some_value); // 表示异步操作成功
//     } else {
//       reject(some_error); // 异步操作失败
//     }
//   }
// });
//
// 这时得到一个promise对象，但这个对象还并不知道如果成功或者失败了，接下来做什么
// 因此我们还需要使用其then方法：
// promise.then(function(value) {
//    // 这里value 来自 resolve
// }, function(error) {
//    // error来自reject
// });
//
// new Promise(...)和then中，reject的部分都可以缺省
//
//
//
//


// 最简单的timer的例子
function timeout(ms) {
  return new Promise((resolve, reject) => {
    setTimeout(resolve, ms, 'done');
  });
}

var res = timeout(1000).then((value) => {
  console.log(value);
});      

    </script>
  </head>
  <body>
    body
  </body>
</html>
